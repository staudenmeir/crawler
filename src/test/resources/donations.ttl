@prefix :           <crawler://predicate/> .
@prefix type:       <crawler://type/> .
@prefix section:    <http://www.bundestag.de/bundestag/parteienfinanzierung/fundstellen50000> .
@prefix page:       <http://www.bundestag.de/page/> .
@prefix item:       <http://www.bundestag.de/item/> .
@prefix donation:   <http://www.bundestag.de/property/donation/> .

_:
    :section    section: .

section:
    :page       page:donations .

page:donations
    :type       type:items ;
    :next       "//div[@class='jahreLeiste']//li[@class='aktiv']/following-sibling::li[1][.//span/text()>='2009']/a" ;
    :item       item:donation .

item:donation
    :path       "//div[@class='inhalt']//tbody/tr[count(td)>1]" ;
    :property   donation:party ;
    :property   donation:amount ;
    :property   donation:donor ;
    :property   donation:date .

donation:party
    :path       "./td[1]" .

donation:amount
    :path       "./td[2]" ;
    :regex      "[\\d.]{6,}(,\\d{2})?" ;
    :replace [
        :old    "[.]" ;
        :new    "" ;
        :order  1
    ] ;
    :replace [
        :old    "," ;
        :new    "." ;
        :order  2
    ] ;
    :type       xsd:decimal .

donation:donor
    :path       "./td[3]" .

donation:date
    :path       "./td[4]" .