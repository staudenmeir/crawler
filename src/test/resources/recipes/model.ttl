@prefix :           <http://crawler/predicate/> .
@prefix section:    <http://www.chefkoch.de/rs/s0/Obazda/Rezepte.html> .
@prefix page:       <http://www.chefkoch.de/page/> .
@prefix item:       <http://www.chefkoch.de/item/> .
@prefix recipe:     <http://www.chefkoch.de/property/recipe/> .
@prefix ingredient: <http://www.chefkoch.de/property/ingredient/> .

_:b
    :section    section: .

section:
    :page       page:recipes .
    
page:recipes
    :type       "links" ;
    :path       "//table[@class='search-result-table recipe-result']//a[@class='search-result-title']" ;
    :next       "//a[@class='pagination-item pagination-next']" ;
    :target     page:recipe .

page:recipe
    :type       "item" ;
    :item       item:recipe ;
    :page       page:ingredients .

page:ingredients
    :type       "items" ;
    :item       item:ingredient .

item:recipe
    :path       "//div[@id='page']" ;
    :property   recipe:label ;
    :property   recipe:summary ;
    :property   recipe:workingTime ;
    :property   recipe:difficulty ;
    :property   recipe:instructions ;
    :property   recipe:portions .

item:ingredient
    :path       ".//div[@id='recipe-incredients']//tr" ;
    :property   ingredient:label ;
    :property   ingredient:amount .

recipe:label
    :path       ".//h1" .

recipe:summary
    :optional   true ;
    :path       ".//div[@class='summary']" .

recipe:workingTime
    :path       ".//h2[text()='Zubereitung']/following-sibling::p" ;
    :pattern    "(?<=Arbeitszeit: ).+?(?= /)" .

recipe:difficulty
    :path       ".//h2[text()='Zubereitung']/following-sibling::p" ;
    :pattern    "(?<=Schwierigkeitsgrad: ).+?(?= /)" .

recipe:instructions
    :path       ".//div[@id='rezept-zubereitung']" .

recipe:portions
    :path       ".//input[@id='divisor']" ;
    :attribute  "value" ;
    :type       xsd:int .

ingredient:label
    :path       "./td[@class='name']" .

ingredient:amount
    :path       "./td[@class='amount']" .